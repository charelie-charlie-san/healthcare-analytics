# 🏥 病院経営分析ダッシュボード

[![Streamlit](https://img.shields.io/badge/Streamlit-FF4B4B?style=for-the-badge&logo=streamlit&logoColor=white)](https://streamlit.io/)
[![Python](https://img.shields.io/badge/Python-3776AB?style=for-the-badge&logo=python&logoColor=white)](https://www.python.org/)
[![Plotly](https://img.shields.io/badge/Plotly-3F4F75?style=for-the-badge&logo=plotly&logoColor=white)](https://plotly.com/)

> **🤖 AI駆動開発プロジェクト**  
> 非エンジニアが Cursor × Gemini で開発した、病院向け共同購買サービスのカスタマーサクセスダッシュボード

---

## 📊 プロジェクト概要

病院向け共同購買サービスの経営分析を、**一目で把握できる**ダッシュボードです。

### ✨ 主な機能

| 機能 | 説明 |
|------|------|
| 📈 **KPI可視化** | 全病院の総削減コストを大きく表示 |
| 🏥 **病院別分析** | プルダウンで選択して詳細データを表示 |
| 📉 **購入推移グラフ** | 月次購入額を棒グラフで可視化 |
| ⚠️ **アラート機能** | 前月より購入額が減少した病院に警告 |
| 💰 **削減コスト推移** | 月次の削減効果を折れ線グラフで表示 |
| 📊 **比較表** | 全病院の最新データを一覧で比較 |
| 🎉 **目標達成演出** | ボタンクリックで風船アニメーション |
| 📄 **PDF出力** | 印刷フレンドリーなビジネス文書を生成 |
| 🎯 **達成率ゲージ** | サイドバーに円グラフで目標達成率を表示 |

---

## 🚀 クイックスタート

### 1️⃣ リポジトリをクローン

```bash
git clone https://github.com/あなたのユーザー名/hospital_dashboard.git
cd hospital_dashboard
```

### 2️⃣ 依存パッケージをインストール

```bash
pip install -r requirements.txt
```

### 3️⃣ アプリを起動

```bash
streamlit run app.py
```

ブラウザが自動で開きます！（開かない場合は http://localhost:8501 にアクセス）

---

## 🛠️ 技術スタック

このプロジェクトは、以下のツール・技術で構築されています：

### 開発環境
- **🤖 AI:** Cursor + Google Gemini（AI駆動開発）
- **🐍 言語:** Python 3.x
- **📦 環境:** Anaconda

### フレームワーク・ライブラリ
- **Streamlit** - インタラクティブなダッシュボード構築
- **Pandas** - データ処理・分析
- **Plotly** - 美しいグラフの描画
- **ReportLab** - PDF生成（ビジネス文書風レポート）
- **Kaleido (v0.2.1)** - Plotlyグラフの画像変換

---

## 📁 データ構造

`data.csv` は以下の形式：

| カラム名 | データ型 | 説明 |
|---------|---------|------|
| 病院名 | String | 病院A〜E |
| 年月 | String | YYYY-MM形式（例: 2024-01） |
| 購入額 | Integer | 月次購入金額（円） |
| 削減コスト | Integer | その月に削減できたコスト（円） |

---

## 🎨 デザインコンセプト

### 画面デザイン
- **🧼 清潔感:** 真っ白な背景（#ffffff）
- **🔵 信頼性:** メディカルブルー（#0056b3）
- **👁️ 視認性:** くっきりした黒文字（#333333）
- **✨ 上品さ:** 控えめな影とフラットデザイン

### PDFデザイン
- **🖨️ 印刷フレンドリー:** 白背景・黒文字
- **📋 ビジネス文書風:** 請求書や報告書のようなスタイル
- **🎨 カラーグラフ:** 白背景のカラーグラフ（plotly_whiteテーマ）
- **📏 明瞭性:** 見やすいテーブルと適切な余白

---

## 💡 使い方

### ダッシュボード画面

1. 画面上部に**全病院の総削減コスト**が大きく表示されます
2. 🎉 **目標達成ボタン**をクリックすると、お祝いの風船が飛びます
3. プルダウンメニューから病院を選択
4. 選択した病院の詳細データ（総購入額、総削減コスト、削減率）が表示
5. ⚠️ 前月より購入額が減少している場合、警告メッセージが表示
6. グラフで購入推移と削減コスト推移を確認
7. 最下部で全病院の最新データを比較

### サイドバー

- **🎯 目標達成率ゲージ:** 今月の達成率を円グラフで確認
- **📊 今月の詳細:** 目標額、実績額、達成率を数値で表示
- **📄 PDFレポート:** 全体レポートまたは病院別レポートをダウンロード

---

## 🔧 カスタマイズ

```python
# 目標額の変更（app.py内）
target_amount = 6500000  # デフォルト: 650万円

# グラフの色
color_discrete_sequence=['#0056b3', '#FF6B6B', '#4ECDC4', '#FFD93D', '#95E1D3']

# アラート条件
# 前月比のチェック部分を編集
```

---

## 🐛 トラブルシューティング

### PDF生成時のエラー

**症状:** 「グラフ画像の生成に失敗しました」

**解決方法:**

```bash
# 推奨：互換性の高いバージョン
pip install "kaleido==0.2.1"

# または最新版を試す
pip install --upgrade kaleido
```

実行後、Streamlitを再起動してください。

### グラフが黒背景で表示される

PDFのグラフが黒背景の場合：

- `template='plotly_white'` が適用されているか確認
- `paper_bgcolor='white'` と `plot_bgcolor='white'` を設定
- フォントの色が `color='black'` になっているか確認

---

## 📝 開発ストーリー

このダッシュボードは、**非エンジニアがAI（Cursor + Gemini）を使って開発**しました。

### 開発プロセス
1. **要件定義:** カスタマーサクセス業務の課題を整理
2. **AI対話:** Cursorで自然言語で指示を出し、コード生成
3. **反復改善:** 実際に使いながら機能を追加・改善
4. **デザイン調整:** 医療系らしい清潔感のあるUIに仕上げ

### 学んだこと
- Streamlitの柔軟性とスピード感
- PlotlyとPandasの組み合わせの強力さ
- AI駆動開発の可能性（コードを書かずにここまでできる！）

---

## 🤝 コントリビュート

改善提案やバグ報告は Issues へ！  
プルリクエストも歓迎します 🙌

---

## 📄 ライセンス

MIT License - 自由に使ってください！

---

## 👤 開発者

**にくまる（AI駆動BizDev）**

- 🐦 Twitter/X: [@あなたのアカウント]
- 💼 GitHub: [@あなたのユーザー名]

---

## 🙏 謝辞

- **Streamlit** チーム - 素晴らしいフレームワークをありがとう
- **Cursor + Gemini** - AI駆動開発を可能にしてくれて感謝
- **医療業界の皆様** - このツールが少しでも役立てば嬉しいです

---

<div align="center">

**⭐ このプロジェクトが役に立ったら、スターをお願いします！ ⭐**

Made with ❤️ and 🤖 AI

</div>
